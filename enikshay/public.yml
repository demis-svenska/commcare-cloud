SITE_HOST: 'enikshay.in'
ENIKSHAY_SITE_HOST: 'enikshay.commcarehq.org'
J2ME_SITE_HOST: 'j2me.enikshay.in'
internal_domain_name: 'enikshay.in'
daily_deploy_email: tech-announce-daily@dimagi.com

special_sites:
  - enikshay_ssl

couchdb2:
  username: "{{ localsettings_private.COUCH_USERNAME }}"
  password: "{{ localsettings_private.COUCH_PASSWORD }}"

riak_backend: "leveldb-bad-config"
riak_ring_size: 128

riakcs_proxy_port_override: 9980

primary_ssl_env: "enikshay.in"

msp_users: "{{ secrets.MSP_USERS }}"
fake_ssl_cert: no

DATADOG_ENABLED: True
datadog_integration_cloudant: False
datadog_integration_vmware: True

elasticsearch_endpoint: '{{ groups.elasticsearch.0 }}'
elasticsearch_memory: '8192m'
elasticsearch_cluster_name: 'enikshayes-1.x'

nginx_key_value: '{{ ssl_secrets.private_keys.enikshay_in }}'
# Nginx only accepts on cert, so cat the site cert and chain:
# $ cat india.commcarehq.org.crt intermediate.crt > india.commcarehq.org.combined.crt
nginx_combined_cert_value: "{{ ssl_secrets.certs.enikshay_in }}"

enikshay_nginx_combined_cert_value: '{{ ssl_secrets.certs.enikshay_commcarehq_org }}'
enikshay_key_value: '{{ ssl_secrets.private_keys.enikshay_commcarehq_org }}'


supervisor_http_enabled: True

backup_blobdb: False
backup_postgres: plain
postgresql_backup_days: 1
postgresql_backup_weeks: 1
postgresql_backup_master: False
backup_es: False
postgres_s3: False
backup_couch: True
nadir_hour: 16

nofile_limit: 65536

formplayer_archive_time_spec: '10m'
formplayer_purge_time_spec: '8d'

redis_appendonly: 'no'

KSPLICE_ACTIVE: yes


kafka_broker_id: 0

ufw_private_interface: eth0

control_machine_ip: 172.25.3.5

etc_hosts_lines: ['172.25.1.5 enikshay.in enikshay.commcarehq.org']
etc_hosts_lines_removed: []

nameservers:
  - 8.8.8.8
  - 8.8.4.4

shared_drive_enabled: true

# adding missing variables compared to icds
#http_proxy_address: '172.25.3.6' # use pg_standby as the patch server
#http_proxy_port: '3128'

couch_dbs:
  default:
    host: "{{ groups.couchdb2_proxy[0] }}"
    port: "{{ couchdb2_proxy_port }}"
    name: commcarehq
    username: "{{ localsettings_private.COUCH_USERNAME }}"
    password: "{{ localsettings_private.COUCH_PASSWORD }}"
    is_https: False

localsettings:
  ALLOWED_HOSTS:
    - localhost
    - 127.0.0.1
    - "{{ ENIKSHAY_SITE_HOST }}"
    - "{{ SITE_HOST }}"
    - "{{ J2ME_SITE_HOST }}"
  ASYNC_INDICATORS_TO_QUEUE: 30000
  BANK_ADDRESS: { 'first_line': "1 Citizens Drive", 'city': "Riverside", 'region': "RI", 'postal_code': "02915" }
  BANK_NAME: "RBS Citizens N.A."
  BANK_SWIFT_CODE: 'CTZIUS33'



  CELERY_PERIODIC_QUEUE: 'celery_periodic'
  CELERY_REMINDER_CASE_UPDATE_QUEUE: 'reminder_case_update_queue'
  CELERY_REMINDER_RULE_QUEUE: 'reminder_rule_queue'
  CELERY_REPEAT_RECORD_QUEUE: 'repeat_record_queue'
  CELERY_RESULT_BACKEND: 'djcelery.backends.database:DatabaseBackend'
  CELERY_TIMEZONE: 'Asia/Kolkata'
  COUCH_USERNAME: "{{ localsettings_private.COUCH_USERNAME }}"
  COUCH_PASSWORD: "{{ localsettings_private.COUCH_PASSWORD }}"
  COUCH_STALE_QUERY: 'update_after'
  DEPLOY_MACHINE_NAME: "{{ inventory_hostname }}"

  ELASTICSEARCH_HOST: "{{ groups.elasticsearch.0 }}"
  ELASTICSEARCH_PORT: '9200'

  EMAIL_SMTP_HOST: 'localhost'
  EMAIL_SMTP_PORT: 25
  EMAIL_USE_TLS: no
  ENABLE_DRACONIAN_SECURITY_FEATURES: yes
  ENIKSHAY_QUEUE: 'enikshay_queue'
  FORMPLAYER_URL: "/formplayer"
  HQ_INSTANCE: 'enikshay'
    INACTIVITY_TIMEOUT: 20160
  INVOICE_FROM_ADDRESS:
    'name': "Dimagi, Inc."
    'first_line': "585 Massachusetts Ave"
    'city': "Cambridge"
    'region': "MA"
    'postal_code': "02139"
    'country': "US"
    'phone_number': "(617) 649-2214"
    'email': "accounts@dimagi.com"
    'website': "http://www.dimagi.com"
  INVOICE_PREFIX: Enikshay-
  INVOICE_STARTING_NUMBER: 5000
  J2ME_ADDRESS: "{{ J2ME_SITE_HOST }}"
  KAFKA_URL: "{{ groups.kafka.0 }}"
  MAX_RULE_UPDATES_IN_ONE_RUN: 500000
  PILLOWTOP_MACHINE_ID: enikshaycloud
  PILLOW_RETRY_QUEUE_ENABLED: True
  REDIS_DB: '0'
  REDIS_HOST: "{{ groups.redis.0 }}"
  REDIS_PORT: '6379'
  REMINDERS_QUEUE_ENABLED: True
  SAVED_EXPORT_ACCESS_CUTOFF: 180
  SMS_GATEWAY_URL: ''
  SMS_QUEUE_ENABLED: True
#  STATIC_ROOT:
  TRANSFER_SERVER: 'nginx'
  WS4REDIS_CONNECTION_HOST: "{{ groups.redis.0 }}"
  XFORMS_PLAYER_URL: "http://{{ groups.touchforms.0 }}:4444/"
  ENABLE_PRELOGIN_SITE: False
  ENIKSHAY_PRIVATE_API_USERS: {'BI': 'ppia-bi21', 'GU': 'ppia-gu21', 'MH': 'ppia-mh14'}
  ENIKSHAY_PRIVATE_API_PASSWORD: "{{ localsettings_private.ENIKSHAY_PRIVATE_API_PASSWORD }}"
  OBFUSCATE_PASSWORD_FOR_NIC_COMPLIANCE: True
  RESTRICT_USED_PASSWORDS_FOR_NIC_COMPLIANCE: True
  ENTERPRISE_MODE: True
  COMMCARE_HQ_NAME: 'eNikshay'
  COMMCARE_NAME: 'eNikshay'

site_locations:
  - name: /data_dumps/export/enikshay/public
    try_files: "$uri $uri/index.html $uri/ =404"
    auth_basic: '"Restricted Content"'
    auth_basic_user_file: '/etc/nginx/.htpasswd_enikshay_public'
  - name: /data_dumps/export/enikshay/private
    try_files: "$uri $uri/index.html $uri/ =404"
    auth_basic: '"Restricted Content"'
    auth_basic_user_file: '/etc/nginx/.htpasswd_enikshay_private'
