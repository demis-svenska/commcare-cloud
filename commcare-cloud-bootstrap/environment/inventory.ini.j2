{% for machine in inventory.all_hosts -%}
[{{ machine.name }}]
{{ machine.private_ip }} ansible_host={{ machine.public_ip }}
{%- for key, value in machine.vars.items()|sort %} {{ key }}={{ value }}{% endfor %}

{% endfor -%}
{% for _, group in inventory.all_groups.items()|sort %}
[{{ group.name }}:children]
{% for host_name in group.host_names -%}
{{ host_name }}
{%- endfor %}
{% endfor %}

{% for _, group in inventory.all_groups.items()|sort %}
[{{ group.name }}:vars]
hostname='{{ group.name }}'
{{ host_name }}
{%- endfor %}

[control]
